<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/stock.js"></script>
<div id="container" style="width:100%; height:800px;"></div>
<script>
    let chart; // globally available
    document.addEventListener('DOMContentLoaded', function () {
        chart = Highcharts.stockChart('container', {
            rangeSelector: {
                allButtonsEnabled: true,
                buttons: [{
                    type: 'week',
                    count: 1,
                    text: 'Hour',
                    dataGrouping: {
                        forced: true,
                        units: [['hour', [1]]]
                    }
                },{
                    type: 'month',
                    count: 3,
                    text: 'Day',
                    dataGrouping: {
                        forced: true,
                        units: [['day', [1]]]
                    }
                }, {
                    type: 'year',
                    count: 1,
                    text: 'Week',
                    dataGrouping: {
                        forced: true,
                        units: [['week', [1]]]
                    }
                }, {
                    type: 'all',
                    text: 'Month',
                    dataGrouping: {
                        forced: true,
                        units: [['month', [1]]]
                    }
                }],
                buttonTheme: {
                    width: 60
                },
                selected: 4
            },
            legend: {
                enabled: true
            },
            series: [{
                name: 'Haushalt',
                data: [{% for element in power_data_haushalt %}[
                    {{ element.tstamp }},{{ element.power_current|floatformat }}], {% endfor %}],
                type: 'spline',
                tooltip: {
                    valueDecimals: 0,
                },
                dataGrouping: {
                    units: [['month', [1]]]
                }
            }, {
                name: 'WÃ¤rmepumpe',
                data: [{% for element in power_data_waermepumpe %}[
                    {{ element.tstamp }},{{ element.power_current|floatformat }}], {% endfor %}],
                type: 'spline',
                tooltip: {
                    valueDecimals: 0,
                },
                dataGrouping: {
                    units: [['month', [1]]]
                }
            }
            ],
        });
    });
</script>